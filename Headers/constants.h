//
// Created by pitersk on 23.10.18.
//

#ifndef RPIANC_CONSTANTS_H
#define RPIANC_CONSTANTS_H


#include "common.h"

const size_t NR_OF_CHANNELS = 2;
const long unsigned int FILTER_LENGTH = 128;
const long unsigned int FX_FILTER_LENGTH = 156;
const sample_type LMS_STEP_SIZE = 0.05f;
const sample_type SEC_PATH_LMS_STEP_SIZE = 0.000001f;
const float DC_REDUCTION_VALUE = 0.0f;
const float INPUT_SCALING = 2.0f;
const float OUTPUT_GAIN = 2.0f;
const float DC_REMOVAL_ALPHA = 0.95f;
const std::array<sample_type, FX_FILTER_LENGTH> FX_FILTER_COEFFS = {
        -0.0454213619232178,
        -0.0878528356552124,
        -0.0581623911857605,
        0.0271337032318115,
        0.0703801512718201,
        -0.00567507743835449,
        -0.0928255915641785,
        -0.042012631893158,
        0.0932971239089966,
        0.134739220142365,
        0.0243799090385437,
        -0.0627630352973938,
        0.0233084559440613,
        0.167340517044067,
        0.147217988967896,
        -0.0102465152740479,
        -0.0926462411880493,
        0.0465980172157288,
        0.238254964351654,
        0.217776536941528,
        0.0641266703605652,
        -0.0112729668617249,
        -0.0128869414329529,
        -0.0115615129470825,
        -0.0098528265953064,
        -0.00351369380950928,
        0.00496101379394531,
        0.00877952575683594,
        0.0073239803314209,
        0.0058477520942688,
        0.00560516119003296,
        0.00351035594940186,
        -0.00236785411834717,
        -0.00897508859634399,
        -0.00933969020843506,
        -0.00495415925979614,
        -0.000845491886138916,
        0.000343441963195801,
        0.000851750373840332,
        0.000810980796813965,
        0.00141304731369019,
        0.00403070449829102,
        0.00653010606765747,
        0.00818711519241333,
        0.00498402118682861,
        0.00123971700668335,
        -0.000523507595062256,
        -0.00462532043457031,
        -0.00893533229827881,
        -0.00673103332519531,
        0.00121808052062988,
        0.00904935598373413,
        0.00874531269073486,
        0.00557214021682739,
        0.00629854202270508,
        0.00770986080169678,
        0.00388872623443604,
        -0.00321894884109497,
        -0.00710064172744751,
        -0.00271850824356079,
        0.00328695774078369,
        0.00428849458694458,
        0.00509083271026611,
        0.00483030080795288,
        0.000431418418884277,
        -0.00195074081420898,
        -0.00012660026550293,
        0.00155162811279297,
        0.00103062391281128,
        -8.6665153503418E-05,
        0.00282663106918335,
        0.00557005405426025,
        0.00228768587112427,
        -0.00255310535430908,
        -0.00515103340148926,
        -0.00443559885025024,
        -0.00187301635742188,
        0.00011897087097168,
        0.00275331735610962,
        0.00338083505630493,
        4.88758087158203E-06,
        -0.000909507274627686,
        0.00187969207763672,
        0.000757396221160889,
        -0.00297433137893677,
        -0.00191164016723633,
        0.0034680962562561,
        0.00664085149765015,
        0.00252711772918701,
        -0.00281208753585815,
        -0.0038905143737793,
        -0.00301891565322876,
        -0.000570058822631836,
        0.00337499380111694,
        0.00799894332885742,
        0.00996571779251099,
        0.00730931758880615,
        0.00162899494171143,
        -0.000912785530090332,
        -0.00352329015731812,
        -0.00611823797225952,
        -0.00667655467987061,
        -0.00393563508987427,
        0.00300991535186768,
        0.0104661583900452,
        0.0119302868843079,
        0.00926226377487183,
        0.00446808338165283,
        -0.00280272960662842,
        -0.00901216268539429,
        -0.0129621028900146,
        -0.0113738775253296,
        -0.00443452596664429,
        0.0027649998664856,
        0.0068700909614563,
        0.00867193937301636,
        0.00613236427307129,
        -0.000278294086456299,
        -0.00798296928405762,
        -0.0130630135536194,
        -0.0118676424026489,
        -0.00805413722991943,
        -0.00562036037445068,
        -0.00277525186538696,
        0.000741779804229736,
        0.0027657151222229,
        0.00292831659317017,
        -0.000760078430175781,
        -0.00451654195785522,
        -0.0056304931640625,
        -0.00464701652526855,
        -0.00349873304367065,
        -0.00235766172409058,
        -0.0010446310043335,
        -0.00141334533691406,
        -0.00239741802215576,
        -0.00116521120071411,
        0.000156939029693604,
        0.000975310802459717,
        -0.0016934871673584,
        -0.0044175386428833,
        -0.00546538829803467,
        -0.00355082750320435,
        -0.00109797716140747,
        0.00306230783462524,
        0.00770384073257446,
        0.00867635011672974,
        0.00750529766082764,
        0.00486975908279419,
        0.00339806079864502,
        0.000604450702667236,
        -0.00446885824203491,
        -0.00768029689788818,
        -0.00504559278488159,
        -0.00135910511016846,
        0.00184118747711182
};

const size_t PLAY_FRAMES_PER_PERIOD = 128;
const size_t PLAY_PERIODS_PER_BUFFER = 8;
const size_t CAP_FRAMES_PER_PERIOD = 128;
const size_t CAP_PERIODS_PER_BUFFER = 8;
const size_t BUFFER_SAMPLE_SIZE = CAP_FRAMES_PER_PERIOD*NR_OF_CHANNELS;

#endif //RPIANC_CONSTANTS_H
